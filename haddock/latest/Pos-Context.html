<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Pos.Context</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Pos-Context.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Pos.Context.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">cardano-sl-0.1.0.0: Cardano SL main implementation</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Pos.Context</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Genesis</a></li><li><a href="#g:2">Block semaphore.</a></li><li><a href="#g:3">LRC synchronization</a></li><li><a href="#g:4">NTP</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Re-exports of Pos.Context.* functionality.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="#t:WithNodeContext">WithNodeContext</a> ssc m | m -&gt; ssc <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:LrcSyncData">LrcSyncData</a> = (<a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:NodeContext">NodeContext</a> ssc = <a href="#v:NodeContext">NodeContext</a> {<ul class="subs"><li><a href="#v:ncSystemStart">ncSystemStart</a> :: !<a href="Pos-Types-Timestamp.html#t:Timestamp">Timestamp</a></li><li><a href="#v:ncSecretKey">ncSecretKey</a> :: !<a href="Pos-Crypto.html#t:SecretKey">SecretKey</a></li><li><a href="#v:ncGenesisUtxo">ncGenesisUtxo</a> :: !<a href="Pos-Types-Types.html#t:Utxo">Utxo</a></li><li><a href="#v:ncGenesisLeaders">ncGenesisLeaders</a> :: !<a href="Pos-Types-Types.html#t:SlotLeaders">SlotLeaders</a></li><li><a href="#v:ncTimeLord">ncTimeLord</a> :: !<a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:ncJLFile">ncJLFile</a> :: !(<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.9.1.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>))</li><li><a href="#v:ncDbPath">ncDbPath</a> :: !<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></li><li><a href="#v:ncSscContext">ncSscContext</a> :: !(<a href="Pos-Ssc-Class-Types.html#t:SscNodeContext">SscNodeContext</a> ssc)</li><li><a href="#v:ncAttackTypes">ncAttackTypes</a> :: ![<a href="Pos-Security-CLI.html#t:AttackType">AttackType</a>]</li><li><a href="#v:ncAttackTargets">ncAttackTargets</a> :: ![<a href="Pos-Security-CLI.html#t:AttackTarget">AttackTarget</a>]</li><li><a href="#v:ncPropagation">ncPropagation</a> :: !<a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:ncBlkSemaphore">ncBlkSemaphore</a> :: !(<a href="../base-4.9.1.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a>)</li><li><a href="#v:ncLrcSync">ncLrcSync</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Context.html#t:LrcSyncData">LrcSyncData</a>)</li><li><a href="#v:ncUserSecret">ncUserSecret</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Util-UserSecret.html#t:UserSecret">UserSecret</a>)</li><li><a href="#v:ncKademliaDump">ncKademliaDump</a> :: !<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></li><li><a href="#v:ncNtpData">ncNtpData</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> (Microsecond, Microsecond))</li><li><a href="#v:ncNtpLastSlot">ncNtpLastSlot</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Types-Types.html#t:SlotId">SlotId</a>)</li><li><a href="#v:ncBlockRetrievalQueue">ncBlockRetrievalQueue</a> :: !(TBQueue (NodeId, <a href="Pos-Util.html#t:NewestFirst">NewestFirst</a> <a href="Pos-Util.html#t:NE">NE</a> (<a href="Pos-Types-Types.html#t:BlockHeader">BlockHeader</a> ssc)))</li><li><a href="#v:ncRecoveryHeader">ncRecoveryHeader</a> :: !(TMVar (NodeId, <a href="Pos-Types-Types.html#t:BlockHeader">BlockHeader</a> ssc))</li></ul>}</li><li class="src short"><a href="#v:ncPublicKey">ncPublicKey</a> :: <a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc -&gt; <a href="Pos-Crypto.html#t:PublicKey">PublicKey</a></li><li class="src short"><a href="#v:ncPubKeyAddress">ncPubKeyAddress</a> :: <a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc -&gt; <a href="Pos-Types-Address.html#t:Address">Address</a></li><li class="src short"><a href="#v:genesisUtxoM">genesisUtxoM</a> :: (<a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:Utxo">Utxo</a></li><li class="src short"><a href="#v:genesisLeadersM">genesisLeadersM</a> :: (<a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:SlotLeaders">SlotLeaders</a></li><li class="src short"><a href="#v:putBlkSemaphore">putBlkSemaphore</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a> -&gt; m ()</li><li class="src short"><a href="#v:readBlkSemaphore">readBlkSemaphore</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a></li><li class="src short"><a href="#v:takeBlkSemaphore">takeBlkSemaphore</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a></li><li class="src short"><a href="#v:waitLrc">waitLrc</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m ()</li><li class="src short"><a href="#v:lrcActionOnEpoch">lrcActionOnEpoch</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, MonadThrow m) =&gt; <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; (<a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)) -&gt; m a</li><li class="src short"><a href="#v:lrcActionOnEpochReason">lrcActionOnEpochReason</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, MonadThrow m) =&gt; <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; Text -&gt; (<a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)) -&gt; m a</li><li class="src short"><a href="#v:setNtpLastSlot">setNtpLastSlot</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Types-Types.html#t:SlotId">SlotId</a> -&gt; m ()</li><li class="src short"><a href="#v:readNtpLastSlot">readNtpLastSlot</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:SlotId">SlotId</a></li><li class="src short"><a href="#v:readNtpMargin">readNtpMargin</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m Microsecond</li><li class="src short"><a href="#v:readNtpData">readNtpData</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m (Microsecond, Microsecond)</li><li class="src short"><span class="keyword">newtype</span> <a href="#t:ContextHolder">ContextHolder</a> ssc m a = <a href="#v:ContextHolder">ContextHolder</a> {<ul class="subs"><li><a href="#v:getContextHolder">getContextHolder</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) m a</li></ul>}</li><li class="src short"><a href="#v:runContextHolder">runContextHolder</a> :: <a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; m a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:WithNodeContext" class="def">WithNodeContext</a> ssc m | m -&gt; ssc <span class="keyword">where</span> <a href="src/Pos.Context.Class.html#WithNodeContext" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></p><div class="doc"><p>Class for something that has <code><a href="Pos-Context.html#t:NodeContext">NodeContext</a></code> inside.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Pos-Context.html#v:getNodeContext">getNodeContext</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:getNodeContext" class="def">getNodeContext</a> :: m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:WithNodeContext" class="caption collapser" onclick="toggleSection('i:WithNodeContext')">Instances</p><div id="section.i:WithNodeContext" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:1" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:1')"></span> (<a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (ResourceT m)</span> <a href="src/Pos.Context.Class.html#line-31" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: ResourceT m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:2" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:2')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Delegation.html#t:DelegationT">DelegationT</a> m)</span> <a href="src/Pos.Context.Class.html#line-44" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Delegation.html#t:DelegationT">DelegationT</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:3" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:3')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Update.html#t:USHolder">USHolder</a> m)</span> <a href="src/Pos.Context.Class.html#line-50" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Update.html#t:USHolder">USHolder</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:4" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:4')"></span> <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Statistics.html#t:NoStatsT">NoStatsT</a> m)</span> <a href="src/Pos.Context.Class.html#line-86" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Statistics.html#t:NoStatsT">NoStatsT</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:5" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:5')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Statistics.html#t:StatsT">StatsT</a> m)</span> <a href="src/Pos.Context.Class.html#line-136" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Statistics.html#t:StatsT">StatsT</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:6" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:6')"></span> <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Update.html#t:DBPoll">DBPoll</a> m)</span> <a href="src/Pos.Context.Class.html#line-50" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Update.html#t:DBPoll">DBPoll</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:7" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:7')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Update.html#t:PollT">PollT</a> m)</span> <a href="src/Pos.Context.Class.html#line-63" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Update.html#t:PollT">PollT</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:8" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:8')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Wallet-Web.html#t:WalletWebDB">WalletWebDB</a> m)</span> <a href="src/Pos.Context.Class.html#line-44" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:8" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Wallet-Web.html#t:WalletWebDB">WalletWebDB</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:9" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:9')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Wallet-Web.html#t:WalletWebSockets">WalletWebSockets</a> m)</span> <a href="src/Pos.Context.Class.html#line-108" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:9" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Wallet-Web.html#t:WalletWebSockets">WalletWebSockets</a> m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:10" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:10')"></span> (<a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="../transformers-0.5.2.0/Control-Monad-Trans-Except.html#t:ExceptT">ExceptT</a> e m)</span> <a href="src/Pos.Context.Class.html#line-27" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:10" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-Except.html#t:ExceptT">ExceptT</a> e m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:11" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:11')"></span> (<a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Lazy.html#t:StateT">StateT</a> a m)</span> <a href="src/Pos.Context.Class.html#line-23" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:11" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-State-Lazy.html#t:StateT">StateT</a> a m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:12" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:12')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> kek m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> kek (<a href="Pos-DB.html#t:DBHolder">DBHolder</a> ssc m)</span> <a href="src/Pos.Context.Class.html#line-31" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:12" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-DB.html#t:DBHolder">DBHolder</a> ssc m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> kek) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:13" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:13')"></span> <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Class.html#line-70" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:13" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:14" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:14')"></span> (<a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Ssc-Extra.html#t:SscHolder">SscHolder</a> ssc m)</span> <a href="src/Pos.Context.Class.html#line-52" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:14" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Ssc-Extra.html#t:SscHolder">SscHolder</a> ssc m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WithNodeContext:WithNodeContext:15" class="instance expander" onclick="toggleSection('i:ic:WithNodeContext:WithNodeContext:15')"></span> (<a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> a m)</span> <a href="src/Pos.Context.Class.html#line-19" class="link">Source</a> <a href="#t:WithNodeContext" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WithNodeContext:WithNodeContext:15" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> a m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:LrcSyncData" class="def">LrcSyncData</a> = (<a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a>, <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a>) <a href="src/Pos.Context.Context.html#LrcSyncData" class="link">Source</a> <a href="#t:LrcSyncData" class="selflink">#</a></p><div class="doc"><p>Data used for LRC syncronization. First value is <strong>False</strong> iff
 LRC is running now. Second value is last epoch for which we have
 already computed LRC.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:NodeContext" class="def">NodeContext</a> ssc <a href="src/Pos.Context.Context.html#NodeContext" class="link">Source</a> <a href="#t:NodeContext" class="selflink">#</a></p><div class="doc"><p>NodeContext contains runtime context of node.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NodeContext" class="def">NodeContext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:ncSystemStart" class="def">ncSystemStart</a> :: !<a href="Pos-Types-Timestamp.html#t:Timestamp">Timestamp</a></dfn><div class="doc"><p>Time when system started working.</p></div></li><li><dfn class="src"><a id="v:ncSecretKey" class="def">ncSecretKey</a> :: !<a href="Pos-Crypto.html#t:SecretKey">SecretKey</a></dfn><div class="doc"><p>Secret key used for blocks creation.</p></div></li><li><dfn class="src"><a id="v:ncGenesisUtxo" class="def">ncGenesisUtxo</a> :: !<a href="Pos-Types-Types.html#t:Utxo">Utxo</a></dfn><div class="doc"><p>Genesis utxo</p></div></li><li><dfn class="src"><a id="v:ncGenesisLeaders" class="def">ncGenesisLeaders</a> :: !<a href="Pos-Types-Types.html#t:SlotLeaders">SlotLeaders</a></dfn><div class="doc"><p>Leaders for 0-th epoch</p></div></li><li><dfn class="src"><a id="v:ncTimeLord" class="def">ncTimeLord</a> :: !<a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc"><p>Is time lord</p></div></li><li><dfn class="src"><a id="v:ncJLFile" class="def">ncJLFile</a> :: !(<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../base-4.9.1.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a>))</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ncDbPath" class="def">ncDbPath</a> :: !<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></dfn><div class="doc"><p>Path to the database</p></div></li><li><dfn class="src"><a id="v:ncSscContext" class="def">ncSscContext</a> :: !(<a href="Pos-Ssc-Class-Types.html#t:SscNodeContext">SscNodeContext</a> ssc)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:ncAttackTypes" class="def">ncAttackTypes</a> :: ![<a href="Pos-Security-CLI.html#t:AttackType">AttackType</a>]</dfn><div class="doc"><p>Attack types used by malicious emulation</p></div></li><li><dfn class="src"><a id="v:ncAttackTargets" class="def">ncAttackTargets</a> :: ![<a href="Pos-Security-CLI.html#t:AttackTarget">AttackTarget</a>]</dfn><div class="doc"><p>Attack targets used by malicious emulation</p></div></li><li><dfn class="src"><a id="v:ncPropagation" class="def">ncPropagation</a> :: !<a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc"><p>Whether to propagate txs, ssc data, blocks to neighbors</p></div></li><li><dfn class="src"><a id="v:ncBlkSemaphore" class="def">ncBlkSemaphore</a> :: !(<a href="../base-4.9.1.0/Control-Concurrent-MVar.html#t:MVar">MVar</a> <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a>)</dfn><div class="doc"><p>Semaphore which manages access to block application.
 Stored hash is a hash of last applied block.</p></div></li><li><dfn class="src"><a id="v:ncLrcSync" class="def">ncLrcSync</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Context.html#t:LrcSyncData">LrcSyncData</a>)</dfn><div class="doc"><p>Primitive for synchronization with LRC.</p></div></li><li><dfn class="src"><a id="v:ncUserSecret" class="def">ncUserSecret</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Util-UserSecret.html#t:UserSecret">UserSecret</a>)</dfn><div class="doc"><p>Secret keys (and path to file) which are used to send transactions</p></div></li><li><dfn class="src"><a id="v:ncKademliaDump" class="def">ncKademliaDump</a> :: !<a href="../base-4.9.1.0/System-IO.html#t:FilePath">FilePath</a></dfn><div class="doc"><p>Path to kademlia dump file</p></div></li><li><dfn class="src"><a id="v:ncNtpData" class="def">ncNtpData</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> (Microsecond, Microsecond))</dfn><div class="doc"><p>Data for NTP Worker.
 First element is margin (difference between global time and local time)
 which we got from NTP server in last tme.
 Second element is time (local time) for which we got margin in last time.</p></div></li><li><dfn class="src"><a id="v:ncNtpLastSlot" class="def">ncNtpLastSlot</a> :: !(<a href="../base-4.9.1.0/GHC-Conc.html#t:TVar">TVar</a> <a href="Pos-Types-Types.html#t:SlotId">SlotId</a>)</dfn><div class="doc"><p>Slot which was returned from getCurrentSlot in last time</p></div></li><li><dfn class="src"><a id="v:ncBlockRetrievalQueue" class="def">ncBlockRetrievalQueue</a> :: !(TBQueue (NodeId, <a href="Pos-Util.html#t:NewestFirst">NewestFirst</a> <a href="Pos-Util.html#t:NE">NE</a> (<a href="Pos-Types-Types.html#t:BlockHeader">BlockHeader</a> ssc)))</dfn><div class="doc"><p>Concurrent queue that holds block headers that are to be
 downloaded.</p></div></li><li><dfn class="src"><a id="v:ncRecoveryHeader" class="def">ncRecoveryHeader</a> :: !(TMVar (NodeId, <a href="Pos-Types-Types.html#t:BlockHeader">BlockHeader</a> ssc))</dfn><div class="doc"><p>In case of recovery mode this variable holds the latest
 header hash we know about so we can do chained block
 requests. Invariant: this mvar is full iff we're more than
 <code>recoveryHeadersMessage</code> blocks deep relatively to some valid
 header and we're downloading blocks. Every time we get block
 that's more difficult than this one, we overwrite. Every time
 we process some blocks and fail or see that we've downloaded
 this header, we clean mvar.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:ncPublicKey" class="def">ncPublicKey</a> :: <a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc -&gt; <a href="Pos-Crypto.html#t:PublicKey">PublicKey</a> <a href="src/Pos.Context.Context.html#ncPublicKey" class="link">Source</a> <a href="#v:ncPublicKey" class="selflink">#</a></p><div class="doc"><p>Generate <code><a href="Pos-Crypto.html#t:PublicKey">PublicKey</a></code> from <code><a href="Pos-Crypto.html#t:SecretKey">SecretKey</a></code> of <code><a href="Pos-Context.html#t:NodeContext">NodeContext</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:ncPubKeyAddress" class="def">ncPubKeyAddress</a> :: <a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc -&gt; <a href="Pos-Types-Address.html#t:Address">Address</a> <a href="src/Pos.Context.Context.html#ncPubKeyAddress" class="link">Source</a> <a href="#v:ncPubKeyAddress" class="selflink">#</a></p><div class="doc"><p>Generate <code><a href="Pos-Types-Address.html#t:Address">Address</a></code> from <code><a href="Pos-Crypto.html#t:SecretKey">SecretKey</a></code> of <code><a href="Pos-Context.html#t:NodeContext">NodeContext</a></code></p></div></div><h1 id="g:1">Genesis</h1><div class="top"><p class="src"><a id="v:genesisUtxoM" class="def">genesisUtxoM</a> :: (<a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:Utxo">Utxo</a> <a href="src/Pos.Context.Functions.html#genesisUtxoM" class="link">Source</a> <a href="#v:genesisUtxoM" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:genesisLeadersM" class="def">genesisLeadersM</a> :: (<a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:SlotLeaders">SlotLeaders</a> <a href="src/Pos.Context.Functions.html#genesisLeadersM" class="link">Source</a> <a href="#v:genesisLeadersM" class="selflink">#</a></p></div><h1 id="g:2">Block semaphore.</h1><div class="top"><p class="src"><a id="v:putBlkSemaphore" class="def">putBlkSemaphore</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a> -&gt; m () <a href="src/Pos.Context.Functions.html#putBlkSemaphore" class="link">Source</a> <a href="#v:putBlkSemaphore" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readBlkSemaphore" class="def">readBlkSemaphore</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a> <a href="src/Pos.Context.Functions.html#readBlkSemaphore" class="link">Source</a> <a href="#v:readBlkSemaphore" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:takeBlkSemaphore" class="def">takeBlkSemaphore</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:HeaderHash">HeaderHash</a> <a href="src/Pos.Context.Functions.html#takeBlkSemaphore" class="link">Source</a> <a href="#v:takeBlkSemaphore" class="selflink">#</a></p></div><h1 id="g:3">LRC synchronization</h1><div class="top"><p class="src"><a id="v:waitLrc" class="def">waitLrc</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m () <a href="src/Pos.Context.Functions.html#waitLrc" class="link">Source</a> <a href="#v:waitLrc" class="selflink">#</a></p><div class="doc"><p>Block until LRC data is available for given epoch.</p></div></div><div class="top"><p class="src"><a id="v:lrcActionOnEpoch" class="def">lrcActionOnEpoch</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, MonadThrow m) =&gt; <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; (<a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)) -&gt; m a <a href="src/Pos.Context.Functions.html#lrcActionOnEpoch" class="link">Source</a> <a href="#v:lrcActionOnEpoch" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:lrcActionOnEpochReason" class="def">lrcActionOnEpochReason</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m, MonadThrow m) =&gt; <a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; Text -&gt; (<a href="Pos-Types-Types.html#t:EpochIndex">EpochIndex</a> -&gt; m (<a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a)) -&gt; m a <a href="src/Pos.Context.Functions.html#lrcActionOnEpochReason" class="link">Source</a> <a href="#v:lrcActionOnEpochReason" class="selflink">#</a></p></div><h1 id="g:4">NTP</h1><div class="top"><p class="src"><a id="v:setNtpLastSlot" class="def">setNtpLastSlot</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; <a href="Pos-Types-Types.html#t:SlotId">SlotId</a> -&gt; m () <a href="src/Pos.Context.Functions.html#setNtpLastSlot" class="link">Source</a> <a href="#v:setNtpLastSlot" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readNtpLastSlot" class="def">readNtpLastSlot</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m <a href="Pos-Types-Types.html#t:SlotId">SlotId</a> <a href="src/Pos.Context.Functions.html#readNtpLastSlot" class="link">Source</a> <a href="#v:readNtpLastSlot" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readNtpMargin" class="def">readNtpMargin</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m Microsecond <a href="src/Pos.Context.Functions.html#readNtpMargin" class="link">Source</a> <a href="#v:readNtpMargin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:readNtpData" class="def">readNtpData</a> :: (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc m) =&gt; m (Microsecond, Microsecond) <a href="src/Pos.Context.Functions.html#readNtpData" class="link">Source</a> <a href="#v:readNtpData" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ContextHolder" class="def">ContextHolder</a> ssc m a <a href="src/Pos.Context.Holder.html#ContextHolder" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></p><div class="doc"><p>Wrapper for monadic action which brings <code><a href="Pos-Context.html#t:NodeContext">NodeContext</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ContextHolder" class="def">ContextHolder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:getContextHolder" class="def">getContextHolder</a> :: <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) m a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:ContextHolder" class="caption collapser" onclick="toggleSection('i:ContextHolder')">Instances</p><div id="section.i:ContextHolder" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:Mockable:1" class="instance expander" onclick="toggleSection('i:id:ContextHolder:Mockable:1')"></span> (Mockable d m, MFunctor' d (<a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) m) m, MFunctor' d (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) (<a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) m)) =&gt; Mockable d (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-64" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:Mockable:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftMockable">liftMockable</a> :: d (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) t -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m t</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadBase:2" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadBase:2')"></span> MonadBase <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> m =&gt; MonadBase <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-54" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadBase:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBase">liftBase</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> &#945; -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m &#945;</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:WithNodeContext:3" class="instance expander" onclick="toggleSection('i:id:ContextHolder:WithNodeContext:3')"></span> <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Pos-Context.html#t:WithNodeContext">WithNodeContext</a> ssc (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-70" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:WithNodeContext:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeContext">getNodeContext</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) <a href="src/Pos.Context.Class.html#getNodeContext" class="link">Source</a> <a href="#v:getNodeContext" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadDB:4" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadDB:4')"></span> <a href="Pos-DB.html#t:MonadDB">MonadDB</a> ssc m =&gt; <a href="Pos-DB.html#t:MonadDB">MonadDB</a> ssc (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-62" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadDB:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getNodeDBs">getNodeDBs</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m (<a href="Pos-DB.html#t:NodeDBs">NodeDBs</a> ssc) <a href="src/Pos.DB.Class.html#getNodeDBs" class="link">Source</a> <a href="#v:getNodeDBs" class="selflink">#</a></p><p class="src"><a href="#v:usingReadOptions">usingReadOptions</a> :: ReadOptions -&gt; ASetter' (<a href="Pos-DB.html#t:NodeDBs">NodeDBs</a> ssc) (<a href="Pos-DB.html#t:DB">DB</a> ssc) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="src/Pos.DB.Class.html#usingReadOptions" class="link">Source</a> <a href="#v:usingReadOptions" class="selflink">#</a></p><p class="src"><a href="#v:usingWriteOptions">usingWriteOptions</a> :: WriteOptions -&gt; ASetter' (<a href="Pos-DB.html#t:NodeDBs">NodeDBs</a> ssc) (<a href="Pos-DB.html#t:DB">DB</a> ssc) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="src/Pos.DB.Class.html#usingWriteOptions" class="link">Source</a> <a href="#v:usingWriteOptions" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadTrans:5" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadTrans:5')"></span> <a href="../transformers-0.5.2.0/Control-Monad-Trans-Class.html#t:MonadTrans">MonadTrans</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc)</span> <a href="src/Pos.Context.Holder.html#line-41" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadTrans:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:lift">lift</a> :: <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:lift" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:Monad:6" class="instance expander" onclick="toggleSection('i:id:ContextHolder:Monad:6')"></span> <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-41" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:Monad:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; (a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:return" class="selflink">#</a></p><p class="src"><a href="#v:fail">fail</a> :: <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:Functor:7" class="instance expander" onclick="toggleSection('i:id:ContextHolder:Functor:7')"></span> <a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> m =&gt; <a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-41" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:Functor:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:-60--36-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadFix:8" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadFix:8')"></span> <a href="../base-4.9.1.0/Control-Monad-Fix.html#t:MonadFix">MonadFix</a> m =&gt; <a href="../base-4.9.1.0/Control-Monad-Fix.html#t:MonadFix">MonadFix</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-44" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadFix:8" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mfix">mfix</a> :: (a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:mfix" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadFail:9" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadFail:9')"></span> <a href="../base-4.9.1.0/Control-Monad-Fail.html#t:MonadFail">MonadFail</a> m =&gt; <a href="../base-4.9.1.0/Control-Monad-Fail.html#t:MonadFail">MonadFail</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-42" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadFail:9" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fail">fail</a> :: <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:fail" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:Applicative:10" class="instance expander" onclick="toggleSection('i:id:ContextHolder:Applicative:10')"></span> <a href="../base-4.9.1.0/Control-Applicative.html#t:Applicative">Applicative</a> m =&gt; <a href="../base-4.9.1.0/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-41" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:Applicative:10" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m (a -&gt; b) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:-60--42-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadIO:11" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadIO:11')"></span> <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-42" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadIO:11" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftIO">liftIO</a> :: <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a <a href="#v:liftIO" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadThrow:12" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadThrow:12')"></span> MonadThrow m =&gt; MonadThrow (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-42" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadThrow:12" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:throwM">throwM</a> :: <a href="../base-4.9.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; e -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadMask:13" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadMask:13')"></span> MonadMask m =&gt; MonadMask (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-42" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadMask:13" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mask">mask</a> :: ((<span class="keyword">forall</span> a. <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b</p><p class="src"><a href="#v:uninterruptibleMask">uninterruptibleMask</a> :: ((<span class="keyword">forall</span> a. <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m b</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadCatch:14" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadCatch:14')"></span> MonadCatch m =&gt; MonadCatch (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-42" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadCatch:14" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:catch">catch</a> :: <a href="../base-4.9.1.0/Control-Exception-Base.html#t:Exception">Exception</a> e =&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; (e -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:WrappedM:15" class="instance expander" onclick="toggleSection('i:id:ContextHolder:WrappedM:15')"></span> <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; WrappedM (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-50" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:WrappedM:15" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> UnwrappedM (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m :: <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a>) :: <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:_WrappedM">_WrappedM</a> :: (Profunctor p, <a href="../base-4.9.1.0/Data-Functor.html#t:Functor">Functor</a> f) =&gt; p (UnwrappedM (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) a) (f (UnwrappedM (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) a)) -&gt; p (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a) (f (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a))</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:HasLoggerName:16" class="instance expander" onclick="toggleSection('i:id:ContextHolder:HasLoggerName:16')"></span> (HasLoggerName m, <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m) =&gt; HasLoggerName (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-43" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:HasLoggerName:16" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getLoggerName">getLoggerName</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m LoggerName</p><p class="src"><a href="#v:modifyLoggerName">modifyLoggerName</a> :: (LoggerName -&gt; LoggerName) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:CanLog:17" class="instance expander" onclick="toggleSection('i:id:ContextHolder:CanLog:17')"></span> CanLog m =&gt; CanLog (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-43" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:CanLog:17" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:dispatchMessage">dispatchMessage</a> :: LoggerName -&gt; Severity -&gt; Text -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m ()</p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadSlots:18" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadSlots:18')"></span> (Mockable CurrentTime m, <a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="Pos-Slotting.html#t:MonadSlots">MonadSlots</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-73" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadSlots:18" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getSystemStartTime">getSystemStartTime</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m <a href="Pos-Types-Timestamp.html#t:Timestamp">Timestamp</a> <a href="src/Pos.Slotting.html#getSystemStartTime" class="link">Source</a> <a href="#v:getSystemStartTime" class="selflink">#</a></p><p class="src"><a href="#v:getCurrentTime">getCurrentTime</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m <a href="Pos-Types-Timestamp.html#t:Timestamp">Timestamp</a> <a href="src/Pos.Slotting.html#getCurrentTime" class="link">Source</a> <a href="#v:getCurrentTime" class="selflink">#</a></p><p class="src"><a href="#v:getCurrentSlot">getCurrentSlot</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m <a href="Pos-Types-Types.html#t:SlotId">SlotId</a> <a href="src/Pos.Slotting.html#getCurrentSlot" class="link">Source</a> <a href="#v:getCurrentSlot" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadJL:19" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadJL:19')"></span> (<a href="../base-4.9.1.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, Mockable Catch m, WithLogger m) =&gt; <a href="Pos-Util-JsonLog.html#t:MonadJL">MonadJL</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-86" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadJL:19" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:jlLog">jlLog</a> :: <a href="Pos-Util-JsonLog.html#t:JLEvent">JLEvent</a> -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m () <a href="src/Pos.Util.JsonLog.html#jlLog" class="link">Source</a> <a href="#v:jlLog" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadBlockchainInfo:20" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadBlockchainInfo:20')"></span> (<a href="Pos-Ssc-Class-Types.html#t:Ssc">Ssc</a> ssc, Mockable CurrentTime m, <a href="Pos-DB.html#t:MonadDB">MonadDB</a> ssc m, MonadThrow m, WithLogger m) =&gt; <a href="Pos-Wallet.html#t:MonadBlockchainInfo">MonadBlockchainInfo</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Wallet.WalletMode.html#line-211" class="link">Source</a> <a href="#t:MonadBlockchainInfo" class="selflink">#</a></td><td class="doc"><p>Instance for full-node's ContextHolder</p></td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadBlockchainInfo:20" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:networkChainDifficulty">networkChainDifficulty</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m <a href="Pos-Types-Types.html#t:ChainDifficulty">ChainDifficulty</a> <a href="src/Pos.Wallet.WalletMode.html#networkChainDifficulty" class="link">Source</a> <a href="#v:networkChainDifficulty" class="selflink">#</a></p><p class="src"><a href="#v:localChainDifficulty">localChainDifficulty</a> :: <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m <a href="Pos-Types-Types.html#t:ChainDifficulty">ChainDifficulty</a> <a href="src/Pos.Wallet.WalletMode.html#localChainDifficulty" class="link">Source</a> <a href="#v:localChainDifficulty" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadTxHistory:21" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadTxHistory:21')"></span> <a href="Pos-Wallet.html#t:MonadTxHistory">MonadTxHistory</a> m =&gt; <a href="Pos-Wallet.html#t:MonadTxHistory">MonadTxHistory</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Wallet.WalletMode.html#line-118" class="link">Source</a> <a href="#t:MonadTxHistory" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadTxHistory:21" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getTxHistory">getTxHistory</a> :: <a href="Pos-Types-Address.html#t:Address">Address</a> -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m [TxHistoryEntry] <a href="src/Pos.Wallet.WalletMode.html#getTxHistory" class="link">Source</a> <a href="#v:getTxHistory" class="selflink">#</a></p><p class="src"><a href="#v:saveTx">saveTx</a> :: (<a href="Pos-Types-Types.html#t:TxId">TxId</a>, <a href="Pos-Types-Types.html#t:TxAux">TxAux</a>) -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m () <a href="src/Pos.Wallet.WalletMode.html#saveTx" class="link">Source</a> <a href="#v:saveTx" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:MonadBalances:22" class="instance expander" onclick="toggleSection('i:id:ContextHolder:MonadBalances:22')"></span> <a href="Pos-Wallet.html#t:MonadBalances">MonadBalances</a> m =&gt; <a href="Pos-Wallet.html#t:MonadBalances">MonadBalances</a> (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Wallet.WalletMode.html#line-81" class="link">Source</a> <a href="#t:MonadBalances" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:MonadBalances:22" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:getOwnUtxo">getOwnUtxo</a> :: <a href="Pos-Types-Address.html#t:Address">Address</a> -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m <a href="Pos-Types-Types.html#t:Utxo">Utxo</a> <a href="src/Pos.Wallet.WalletMode.html#getOwnUtxo" class="link">Source</a> <a href="#v:getOwnUtxo" class="selflink">#</a></p><p class="src"><a href="#v:getBalance">getBalance</a> :: <a href="Pos-Types-Address.html#t:Address">Address</a> -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m <a href="Pos-Types-Types.html#t:Coin">Coin</a> <a href="src/Pos.Wallet.WalletMode.html#getBalance" class="link">Source</a> <a href="#v:getBalance" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:SharedAtomicT:23" class="instance expander" onclick="toggleSection('i:id:ContextHolder:SharedAtomicT:23')"></span> <span class="keyword">type</span> SharedAtomicT (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-59" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:SharedAtomicT:23" class="inst-details hide"><div class="src"><span class="keyword">type</span> SharedAtomicT (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) = SharedAtomicT m</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:ThreadId:24" class="instance expander" onclick="toggleSection('i:id:ContextHolder:ThreadId:24')"></span> <span class="keyword">type</span> ThreadId (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-57" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:ThreadId:24" class="inst-details hide"><div class="src"><span class="keyword">type</span> ThreadId (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) = ThreadId m</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:Promise:25" class="instance expander" onclick="toggleSection('i:id:ContextHolder:Promise:25')"></span> <span class="keyword">type</span> Promise (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-58" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:Promise:25" class="inst-details hide"><div class="src"><span class="keyword">type</span> Promise (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) = Promise m</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:ChannelT:26" class="instance expander" onclick="toggleSection('i:id:ContextHolder:ChannelT:26')"></span> <span class="keyword">type</span> ChannelT (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-60" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:ChannelT:26" class="inst-details hide"><div class="src"><span class="keyword">type</span> ChannelT (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) = ChannelT m</div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ContextHolder:UnwrappedM:27" class="instance expander" onclick="toggleSection('i:id:ContextHolder:UnwrappedM:27')"></span> <span class="keyword">type</span> UnwrappedM (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m)</span> <a href="src/Pos.Context.Holder.html#line-51" class="link">Source</a> <a href="#t:ContextHolder" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ContextHolder:UnwrappedM:27" class="inst-details hide"><div class="src"><span class="keyword">type</span> UnwrappedM (<a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m) = <a href="../transformers-0.5.2.0/Control-Monad-Trans-Reader.html#t:ReaderT">ReaderT</a> <a href="../base-4.9.1.0/Data-Kind.html#t:-42-">*</a> (<a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc) m</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:runContextHolder" class="def">runContextHolder</a> :: <a href="Pos-Context.html#t:NodeContext">NodeContext</a> ssc -&gt; <a href="Pos-Context.html#t:ContextHolder">ContextHolder</a> ssc m a -&gt; m a <a href="src/Pos.Context.Holder.html#runContextHolder" class="link">Source</a> <a href="#v:runContextHolder" class="selflink">#</a></p><div class="doc"><p>Run <code><a href="Pos-Context.html#t:ContextHolder">ContextHolder</a></code> action.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>